digraph ECommerceFlow {
    rankdir=TB;
    node [shape=box, style=rounded];

    start [label="Başla"];
    login [label="Kullanıcı Giriş Yapmış Mı?", shape=diamond];
    login_yes [label="Devam Et"];
    login_no [label="Giriş Yap / Kayıt Ol"];

    browse [label="Ürün Kategorileri Arasında Gez"];
    select_product [label="Ürün Seçildi Mi?", shape=diamond];
    check_stock [label="Stok Var Mı?", shape=diamond];
    add_to_cart [label="Sepete Ekle"];
    no_stock [label="Stok Yok - Uyarı Göster"];

    continue_browsing [label="Gezinmeye Devam?", shape=diamond];
    view_cart [label="Sepeti Göster"];
    edit_cart [label="Değişiklik Yapmak İstiyor Mu?", shape=diamond];
    modify_cart [label="Ürün Miktarı Değiştir / Sil"];

    promo_check [label="İndirim Kodu Girildi Mi?", shape=diamond];
    promo_valid [label="Kod Geçerli"];
    promo_invalid [label="Geçersiz Kod - Uyarı"];

    min_check [label="Sepet >= 50 TL?", shape=diamond];
    min_fail [label="Minimum 50 TL Gerekli - Geri Dön"];

    cargo_check [label="Sepet >= 200 TL?", shape=diamond];
    free_cargo [label="Kargo Ücretsiz"];
    add_cargo [label="Kargo Ücreti Ekle"];

    payment [label="Ödeme Yöntemi Seç"];
    confirm [label="Sipariş Onayı"];
    end [label="BİTİR"];

    // Connections
    start -> login;
    login -> login_yes [label="EVET"];
    login -> login_no [label="HAYIR"];
    login_yes -> browse;
    login_no -> browse;

    browse -> select_product;
    select_product -> check_stock [label="EVET"];
    select_product -> continue_browsing [label="HAYIR"];

    check_stock -> add_to_cart [label="EVET"];
    check_stock -> no_stock [label="HAYIR"];
    no_stock -> continue_browsing;

    add_to_cart -> continue_browsing;
    continue_browsing -> browse [label="EVET"];
    continue_browsing -> view_cart [label="HAYIR"];

    view_cart -> edit_cart;
    edit_cart -> modify_cart [label="EVET"];
    modify_cart -> view_cart;
    edit_cart -> promo_check [label="HAYIR"];

    promo_check -> promo_valid [label="EVET"];
    promo_check -> promo_invalid [label="HAYIR"];
    promo_invalid -> promo_check;
    promo_valid -> min_check;

    min_check -> cargo_check [label="EVET"];
    min_check -> min_fail [label="HAYIR"];
    min_fail -> view_cart;

    cargo_check -> free_cargo [label="EVET"];
    cargo_check -> add_cargo [label="HAYIR"];
    free_cargo -> payment;
    add_cargo -> payment;

    payment -> confirm;
    confirm -> end;
}
